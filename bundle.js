(()=>{var e={577:e=>{"use strict";e.exports=require("cors")},252:e=>{"use strict";e.exports=require("express")},437:e=>{"use strict";e.exports=require("socket.io")}},n={};function o(r){var t=n[r];if(void 0!==t)return t.exports;var l=n[r]={exports:{}};return e[r](l,l.exports,o),l.exports}(()=>{function e(e,o){if(e){if("string"==typeof e)return n(e,o);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,o):void 0}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,r=Array(n);o<n;o++)r[o]=e[o];return r}var r=o(252),t=o(577),l=o(437),a=r();a.use(t()),a.use(r.json());var i=l(a.listen(5e3,(function(){return console.log("Server started on ".concat(5e3))})),{cors:{origin:"https://heroic-beijinho-d9e039.netlify.app",credentials:!0}});global.onlineUsers=new Map,global.a=[],i.on("connection",(function(n){global.chatSocket=n,console.log("connected"),n.on("disconnect",(function(){console.log("disconnected")})),n.on("add-user",(function(e){var o,r,t;console.log("rrr",0==e.length),0!=e.length&&(o=onlineUsers,r=e,t=n.id,o.has(r)||o.set(r,[]),o.get(r).push(t),console.log("user added"))})),n.on("leave-room",(function(o){!function(n){console.log("removed ",n);var o,r,t,l=function(n,o){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=e(n))){r&&(n=r);var t=0,l=function(){};return{s:l,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(n)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(onlineUsers.entries());try{for(l.s();!(o=l.n()).done;){var a=(r=o.value,t=2,function(e){if(Array.isArray(e))return e}(r)||function(e,n){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,t,l,a,i=[],s=!0,c=!1;try{if(l=(o=o.call(e)).next,0===n){if(Object(o)!==o)return;s=!1}else for(;!(s=(r=l.call(o)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,t=e}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(c)throw t}}return i}}(r,t)||e(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],s=a[1];onlineUsers.set(i,s.filter((function(e){return e!==n}))),0===onlineUsers.get(i).length&&(onlineUsers.delete(i),console.log("empty"))}}catch(e){l.e(e)}finally{l.f()}}(n.id)})),n.on("send-msg",(function(e){global.a=onlineUsers.get(e.room),console.log("online",global.a),console.log("msg send",e.value),global.a&&global.a.forEach((function(o){o&&n.to(o).emit("msg-recieve",e.value,e.langu)}))})),n.on("send-lang",(function(e){global.a=onlineUsers.get(e.room),console.log("online",global.a),console.log("msg send",e.langu),global.a&&global.a.forEach((function(o){o&&n.to(o).emit("lang-recieve",e.langu)}))}))}))})()})();